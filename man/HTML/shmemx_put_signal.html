<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>shmemx_put_signal</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="summary">Summary</h1>
<pre><code>The put-with-signal routine provide a method for copying data from a
contiguous local data obeject to a data object on a specified PE and then
setting a remote signal flag indicating the data transfer is complete.</code></pre>
<h1 id="definitions">Definitions</h1>
<h2 id="cc-synopsis">C/C++ SYNOPSIS</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="ex">void</span> shmemx_TYPENAME_put_signal(TYPE *target, const TYPE *source, size_t len,</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">                                <span class="ex">uint64_t</span> *sig_addr, uint64_t signal, int pe)</a></code></pre></div>
<p>where TYPE is one of the standard RMA types and has a corresponding TYPENAME specified by Table:1</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="ex">void</span> shmem_putSIZE(void *target, const void *source, size_t len,</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">                   <span class="ex">uint64_t</span> *sig_addr, uint64_t signal, int pe)</a></code></pre></div>
<p>where SIZE is one of 8, 16, 32, 64, 128.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="ex">void</span> shmem_putmem(void *target, const void *source, size_t len,</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">                  <span class="ex">uint64_t</span> *sig_addr, uint64_t signal, int pe)</a></code></pre></div>
<h1 id="deprecated-synopsis">Deprecated Synopsis</h1>
<h2 id="deprecated-fortran-synopsis">Deprecated Fortran Synopsis</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="ex">INTEGER</span> len, pe</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="ex">UNSIGNED</span>(KIND=8) <span class="ex">sig_addr</span>(*)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="ex">UNSIGNED</span>(KIND=8) <span class="ex">signal</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="ex">CALL</span> SHMEMX_PUT_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7"></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="ex">CALL</span> SHMEMX_PUTMEM_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;(</span><span class="va">KIND=</span>4<span class="op">)</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="ex">CALL</span> SHMEMX_PUT4_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-13" data-line-number="13"></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;(</span><span class="va">KIND=</span>8<span class="op">)</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="ex">CALL</span> SHMEMX_PUT8_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-16" data-line-number="16"></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;(</span><span class="va">KIND=</span>2<span class="op">)</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="ex">CALL</span> SHMEMX_PUT16_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-19" data-line-number="19"></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;(</span><span class="va">KIND=</span>4<span class="op">)</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="ex">CALL</span> SHMEMX_PUT32_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-22" data-line-number="22"></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;(</span><span class="va">KIND=</span>8<span class="op">)</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="ex">CALL</span> SHMEMX_PUT64_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-25" data-line-number="25"></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="op">&lt;</span><span class="ex">TYPE</span><span class="op">&gt;(</span><span class="va">KIND=</span>16<span class="op">)</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="ex">CALL</span> SHMEMX_PUT128_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-28" data-line-number="28"></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="ex">CHARACTER*</span>(*) <span class="ex">target</span>(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="ex">CALL</span> SHMEMX_CHARACTER_PUT_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-31" data-line-number="31"></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="ex">COMPLEX</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="ex">CALL</span> SHMEMX_COMPLEX_PUT_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-34" data-line-number="34"></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="ex">DOUBLE</span> PRECISION target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="ex">CALL</span> SHMEMX_DOUBLE_PUT_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-37" data-line-number="37"></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="ex">INTEGER</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="ex">CALL</span> SHMEMX_INTEGER_PUT_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-40" data-line-number="40"></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="ex">LOGICAL</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="ex">CALL</span> SHMEMX_LOGICAL_PUT_SIGNAL(target, source, len, sig_addr, signal, pe)</a>
<a class="sourceLine" id="cb5-43" data-line-number="43"></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="ex">REAL</span> target(*), <span class="bu">source</span>(*)</a>
<a class="sourceLine" id="cb5-45" data-line-number="45"><span class="ex">CALL</span> SHMEMX_REAL_PUT_SIGNAL(target, source, len, sig_addr, signal, pe)</a></code></pre></div>
<h1 id="datatype-reference-table">Datatype Reference Table</h1>
<h2 id="table1">Table:1</h2>
<pre><code>  |           TYPE          |      TYPENAME       |
  |-------------------------|---------------------|
  |   float                 |     float           |
  |   double                |     double          |
  |   long double           |     longdouble      |
  |   char                  |     char            |
  |   int                   |     int             |
  |   long                  |     long            |
  |   long long             |     longlong        |</code></pre>
<h1 id="arguments">Arguments</h1>
<pre><code>   target    Data object on the remote PE to be updated. This data object
             must be remotely accessible.

   source    Data object containing the data to be copied.

   len       Number of elements to transfer. len must be of type integer.
             If using Fortran, it must be a constant, variable, or array
             element of default integer type.

   sig_addr  Data object on the remote PE to be updated with the signal. For
             optimal performance, this object should be in the same memory
             segment (data segment or symmetric heap) as the data object
             specified in target.

   signal    The unsigned 64-bit value used to set the remote flag. If using
             Fortran, it must be a constant, variable, or array element of
             unsigned type (kind=8).

   pe        PE number of the remote PE. pe must be of type integer. If you
             are using Fortran, it must be a constant, variable, or array
             element of default integer type.</code></pre>
<h1 id="description">Description</h1>
<pre><code>The block data put+signal routines provide a high-performance method for
copying contiguous data from a data object on the local PE to a
contiguous data object on a remote PE and then setting a remote signal
flag indicating the data transfer is complete. These routines are
blocking; that is, the routines return only after the data has been
copied from the source data object on the local PE, but not necessarily
before the data has been copied to the target data object on the remote
PE. Calling shmem_quiet (or routines that call it) guarantees that
all puts previously issued by this PE are complete, indicating the data
has been copied to the target on the remote PE and the remote signal
flag has been set.</code></pre>
<h1 id="notes">Notes</h1>
<pre><code>Per OpenSHMEM specification 1.2 Annex C, support for zero-length
transfers is provided for zero-length get, put, and put with signals.
Remote memory transfers for zero number of elements are accepted, and
this support is provided for both block and non-blocking transfers. For
put with signals, if the number of elements is zero, only the signal is
passed. The usage of NULL pointers for data transfer usually leads to
program abort, but for zero-length transfers, the usage of NULL pointers
is accepted.</code></pre>
<h1 id="example">Example</h1>
<h2 id="cc-example">C/C++ Example</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">#include &lt;stdio.h&gt;</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#include &lt;stdlib.h&gt;</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#include &lt;shmem.h&gt;</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#include &lt;shmemx.h&gt;</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#define MAX_SIZE (2&lt;&lt;10)</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#define VAL_USED 10</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="ex">int</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="ex">main</span>(int argc, char* argv[])</a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="kw">{</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12">    <span class="ex">int</span> i, err_count  = 0<span class="kw">;</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14">    <span class="fu">shmem_init()</span>;</a>
<a class="sourceLine" id="cb10-15" data-line-number="15"></a>
<a class="sourceLine" id="cb10-16" data-line-number="16">    <span class="ex">size_t</span>    size    = MAX_SIZE<span class="kw">;</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17">    <span class="ex">int</span>       me      = shmem_my_pe();</a>
<a class="sourceLine" id="cb10-18" data-line-number="18">    <span class="ex">int</span>       n       = shmem_n_pes();</a>
<a class="sourceLine" id="cb10-19" data-line-number="19">    <span class="ex">int</span>       pe      = (me + 1)<span class="ex">%n</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"></a>
<a class="sourceLine" id="cb10-21" data-line-number="21">    <span class="ex">uint64_t*</span> message = malloc(size * sizeof(uint64_t));</a>
<a class="sourceLine" id="cb10-22" data-line-number="22">    <span class="ex">uint64_t*</span> data    = shmem_malloc(size * sizeof(uint64_t));</a>
<a class="sourceLine" id="cb10-23" data-line-number="23">    <span class="ex">uint64_t*</span> signals = shmem_malloc(sizeof(uint64_t));</a>
<a class="sourceLine" id="cb10-24" data-line-number="24"></a>
<a class="sourceLine" id="cb10-25" data-line-number="25">    <span class="ex">signals</span>[0] = 0<span class="kw">;</span></a>
<a class="sourceLine" id="cb10-26" data-line-number="26">    <span class="kw">for</span> <span class="kw">(</span><span class="ex">i</span> = 0<span class="kw">;</span> <span class="ex">i</span> <span class="op">&lt;</span> size<span class="kw">;</span> <span class="ex">i++</span><span class="kw">)</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb10-27" data-line-number="27">        <span class="ex">message</span>[i] = VAL_USED<span class="kw">;</span></a>
<a class="sourceLine" id="cb10-28" data-line-number="28">        <span class="ex">data</span>[i]    = 0<span class="kw">;</span></a>
<a class="sourceLine" id="cb10-29" data-line-number="29">    <span class="kw">}</span></a>
<a class="sourceLine" id="cb10-30" data-line-number="30">    <span class="fu">shmem_barrier_all()</span>;</a>
<a class="sourceLine" id="cb10-31" data-line-number="31"></a>
<a class="sourceLine" id="cb10-32" data-line-number="32">    <span class="kw">if</span> <span class="kw">(</span><span class="ex">me</span> != 0<span class="kw">)</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb10-33" data-line-number="33">        <span class="ex">shmem_long_wait_until</span>((long *)<span class="kw">&amp;</span><span class="ex">signals</span>[0], SHMEM_CMP_EQ, 1);</a>
<a class="sourceLine" id="cb10-34" data-line-number="34">    <span class="kw">}</span></a>
<a class="sourceLine" id="cb10-35" data-line-number="35"></a>
<a class="sourceLine" id="cb10-36" data-line-number="36">    <span class="ex">shmemx_putmem_signal</span>(data, message, size*sizeof(uint64_t),</a>
<a class="sourceLine" id="cb10-37" data-line-number="37">            <span class="kw">&amp;</span><span class="ex">signals</span>[0], 1, pe);</a>
<a class="sourceLine" id="cb10-38" data-line-number="38"></a>
<a class="sourceLine" id="cb10-39" data-line-number="39">    <span class="kw">if</span> <span class="kw">(</span><span class="ex">me</span> == 0<span class="kw">)</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb10-40" data-line-number="40">        <span class="ex">shmem_long_wait_until</span>((long *)<span class="kw">&amp;</span><span class="ex">signals</span>[0], SHMEM_CMP_EQ, 1);</a>
<a class="sourceLine" id="cb10-41" data-line-number="41">        <span class="bu">printf</span>(<span class="st">&quot;BCAST with put with signal is complete\n&quot;</span>);</a>
<a class="sourceLine" id="cb10-42" data-line-number="42">    <span class="kw">}</span></a>
<a class="sourceLine" id="cb10-43" data-line-number="43"></a>
<a class="sourceLine" id="cb10-44" data-line-number="44">    <span class="fu">free</span>(message);</a>
<a class="sourceLine" id="cb10-45" data-line-number="45">    <span class="ex">shmem_free</span>(data);</a>
<a class="sourceLine" id="cb10-46" data-line-number="46">    <span class="ex">shmem_free</span>(signals);</a>
<a class="sourceLine" id="cb10-47" data-line-number="47"></a>
<a class="sourceLine" id="cb10-48" data-line-number="48">    <span class="fu">shmem_finalize()</span>;</a>
<a class="sourceLine" id="cb10-49" data-line-number="49">    <span class="bu">return</span> 0<span class="kw">;</span></a>
<a class="sourceLine" id="cb10-50" data-line-number="50"><span class="kw">}</span></a></code></pre></div>
</body>
</html>
